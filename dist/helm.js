// HelmJS v0.5.0 - https://github.com/Letdown2491/helmjs
var R=new Map,P=new WeakMap,H=t=>P.get(t)||(P.set(t,{}),P.get(t)),v=t=>document.querySelector(t),w=(t,e)=>t.hasAttribute(e),z=(t,e)=>{for(let n of t)n.tagName==="A"?(n.classList.toggle("h-disabled",e),e?n.setAttribute("aria-disabled","true"):n.removeAttribute("aria-disabled")):e?n.setAttribute("disabled",""):n.removeAttribute("disabled")},g=(t,e,n={})=>t.dispatchEvent(new CustomEvent(`h:${e}`,{detail:n,bubbles:!0,cancelable:!0})),et=(t,e)=>{e==="top"?window.scrollTo({top:0,behavior:"smooth"}):e==="bottom"?window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}):(e==="target"?t:v(e))?.scrollIntoView({behavior:"smooth",block:"start"})},u=(t,e,n="")=>t.getAttribute(e)??n,j=(t,e)=>{let n=new DOMParser().parseFromString(t,"text/html").querySelector(e);return n?n.innerHTML:t},C=t=>!!t.closest("[h-ignore]"),B=t=>{let e=t.match(/<title[^>]*>([\s\S]*?)<\/title>/i);return e&&(document.title=e[1].trim()),t.replace(/<title[^>]*>[\s\S]*?<\/title>/gi,"")},nt=t=>{let e=t.trim().split(/\s+/),n=new Map;for(let o=1;o<e.length;o++){let[r,f]=e[o].split(":");n.set(r,f??"true")}return{event:e[0],mods:n}},rt=(t,e)=>{let n;return o=>{clearTimeout(n),n=setTimeout(()=>t(o),e)}},st=(t,e)=>{let n=0;return o=>{let r=Date.now();r-n>=e&&(n=r,t(o))}},ot=t=>{if(!t)return 0;let e=t.match(/^(\d+)(ms|s|m)?$/);return e?e[2]==="ms"?+e[1]:e[2]==="m"?+e[1]*6e4:+e[1]*1e3:0},F=t=>{if(!t.includes("h-oob"))return t;let e=document.createElement("template");e.innerHTML=t;for(let n of e.content.querySelectorAll("[h-oob]")){let o=n.getAttribute("h-oob")||"true";n.removeAttribute("h-oob");let r=n.id?document.getElementById(n.id):null;r&&A(r,n.outerHTML,o==="true"?"outer":o),n.remove()}return e.innerHTML},A=(t,e,n)=>{n==="inner"?t.innerHTML=e:n==="outer"?t.outerHTML=e:n==="before"?t.insertAdjacentHTML("beforebegin",e):n==="after"?t.insertAdjacentHTML("afterend",e):n==="prepend"?t.insertAdjacentHTML("afterbegin",e):n==="append"?t.insertAdjacentHTML("beforeend",e):n==="morph"&&it(t,e)},it=(t,e)=>{let n=document.createElement("template");n.innerHTML=e.trim(),X(t,n.content)},X=(t,e)=>{let n=[...t.childNodes],o=[...e.childNodes],r=n.filter(i=>i.nodeType===1),f=o.filter(i=>i.nodeType===1),a=i=>i.some(d=>d.nodeType===3&&d.textContent?.trim());if(a(n)||a(o)){t instanceof Element&&(t.innerHTML=e instanceof Element?e.innerHTML:e.children[0]?.outerHTML||"");return}let l=new Map;for(let i of r)i.id&&l.set(i.id,i);let s=new Set,c=0;for(let i of f){let d;i.id&&l.has(i.id)?d=l.get(i.id):c<r.length&&r[c].tagName===i.tagName&&!r[c].id&&!s.has(r[c])&&(d=r[c]);let m=t.children[c]||null;d?(s.add(d),m!==d&&t.insertBefore(d,m),at(d,i)):t.insertBefore(i.cloneNode(!0),m),c++}for(let i of r)s.has(i)||i.remove()},at=(t,e)=>{if(t.tagName!==e.tagName){t.replaceWith(e.cloneNode(!0));return}let n=t instanceof HTMLInputElement,o=t instanceof HTMLTextAreaElement;for(let{name:r}of t.attributes)e.hasAttribute(r)||t.removeAttribute(r);for(let{name:r,value:f}of e.attributes)(n||o)&&r==="value"||t.getAttribute(r)!==f&&t.setAttribute(r,f);if(n&&e instanceof HTMLInputElement){let r=e.getAttribute("value");r&&t.value!==r&&(t.value=r),t.checked!==e.checked&&(t.checked=e.checked);return}if(o&&e instanceof HTMLTextAreaElement){let r=e.textContent;r&&t.value!==r&&(t.value=r);return}if(!e.children.length&&!t.children.length){t.textContent!==e.textContent&&(t.textContent=e.textContent);return}X(t,e)},Y=t=>{let e=t.tagName;if(w(t,"h-get")){let n=t.getAttribute(e==="A"?"href":e==="FORM"?"action":"");return n?{method:"GET",action:n}:null}if(e==="FORM"){let n=t.getAttribute("action");if(!n)return null;for(let o of["post","put","patch","delete"])if(w(t,`h-${o}`))return{method:o.toUpperCase(),action:n}}return null},ct=t=>{if(H(t).init||C(t))return;let e=Y(t);if(!e||!g(t,"init",{}))return;let n=t.tagName==="FORM"?"submit":"click",o=u(t,"h-trigger",n).split(",").map(a=>a.trim()).filter(Boolean),r=u(t,"h-sync"),f=async a=>{let l=u(t,"h-confirm");if(l&&!confirm(l))return;let s=H(t);if(r==="abort"&&s.abort)s.abort.abort();else if(r==="drop"&&s.abort)return;let c=r?new AbortController:void 0;c&&(s.abort=c);let i=t instanceof HTMLFormElement?t:null,d=i?new FormData(i):null;i&&a instanceof SubmitEvent&&a.submitter?.hasAttribute("name")&&d.append(a.submitter.getAttribute("name"),a.submitter.value);let m=u(t,"h-target"),L=m?v(m)??t:t,b=u(t,"h-swap","morph"),D=u(t,"h-headers"),T={"H-Request":"true"};if(m&&(T["H-Target"]=m),D)try{T={...T,...JSON.parse(D)}}catch{}let x=e.method==="GET",h={trigger:a,action:e.action,method:e.method,target:L,swap:b,body:x||e.method==="DELETE"?null:d,headers:T};if(a.preventDefault(),!g(t,"before",{cfg:h}))return;let Z=!x,_=w(t,"h-no-disable"),N=[];(Z&&!_||w(t,"h-disabled"))&&(t.tagName==="FORM"?N.push(...t.querySelectorAll('button, input[type="submit"]')):N.push(t));let $=u(t,"h-disabled");$&&N.push(...document.querySelectorAll($)),z(N,!0);let V=u(t,"h-indicator"),O=V?v(V):null;O&&O.classList.add("h-loading");let y=h.action;if(i&&d&&h.method==="GET"){let p=new URLSearchParams(d);p.toString()&&(y+=(y.includes("?")?"&":"?")+p)}try{let p,E,q=x?R.get(y):null;if(q&&q.expires>Date.now()){let{response:S,text:M}=await q.promise;p=S,E=B(M),R.delete(y)}else p=await fetch(y,{method:h.method,headers:h.headers,body:h.body,signal:c?.signal}),E=B(await p.text());let k=u(t,"h-select");if(k&&(E=j(E,k)),p.status>=400){let S=u(t,"h-error-target"),M=S?v(S):null;M&&A(M,E,"inner"),g(t,"error",{cfg:h,response:p,html:E})}else if(g(t,"after",{cfg:h,response:p,html:E})){E=F(E);let S=u(t,"h-scroll"),M=S==="target"?h.target:null,U=()=>A(h.target,E,h.swap);if(document.startViewTransition?await document.startViewTransition(U).finished:U(),g(t,"swapped",{cfg:h}),document.contains(t)||g(document.documentElement,"swapped",{cfg:h}),S)if(S==="target"&&h.swap==="outer"){let I=M?.id?document.getElementById(M.id):null;I&&I.scrollIntoView({behavior:"smooth",block:"start"})}else et(h.target,S);let J=u(t,"h-focus");J&&v(J)?.focus?.();let W=w(t,"h-push-url"),tt=w(t,"h-replace-url");if(W||tt){let I={h:!0,url:y,target:m||null,swap:h.swap,select:k||null,title:document.title};W?history.pushState(I,"",y):history.replaceState(I,"",y)}}}catch(p){if(p.name==="AbortError")return;g(t,"error",{cfg:h,error:p})}finally{c&&(s.abort=void 0),z(N,!1),O&&O.classList.remove("h-loading")}};for(let a of o){let{event:l,mods:s}=nt(a),c=f;s.has("debounce")&&(c=rt(c,parseInt(s.get("debounce"))||300)),s.has("throttle")&&(c=st(c,parseInt(s.get("throttle"))||300));let i=s.get("from"),d=i?v(i):t;if(l==="intersect"){let m=parseFloat(s.get("threshold")??"0"),L=s.get("rootMargin")??"0px",b=new IntersectionObserver(D=>{for(let T of D)T.isIntersecting&&(c(new CustomEvent("intersect",{detail:T})),s.has("once")&&b.disconnect())},{threshold:m,rootMargin:L});b.observe(t)}else d&&d.addEventListener(l,c,{once:s.has("once"),capture:s.has("capture"),passive:s.has("passive")})}H(t).init=!0,g(t,"inited",{})},lt=t=>{if(H(t).sse||C(t))return;let e=u(t,"h-sse");if(!e)return;let n=new Map;t.querySelectorAll("template[h-sse-on]").forEach(a=>{let l=u(a,"h-sse-on"),s=u(a,"h-target");l&&s&&n.set(l,{target:s,swap:u(a,"h-swap","append")})});let o=u(t,"h-target"),r=u(t,"h-swap","append"),f=new EventSource(e);H(t).sse=f,g(t,"sse-connect",{url:e}),n.forEach((a,l)=>{f.addEventListener(l,s=>{let c=v(a.target);c&&(A(c,F(s.data),a.swap),g(t,"sse-message",{event:l,data:s.data}))})}),f.onmessage=a=>{if(o){let l=v(o);l&&(A(l,F(a.data),r),g(t,"sse-message",{data:a.data}))}},f.onerror=()=>g(t,"sse-error",{url:e})},ut=t=>{if(H(t).poll||C(t))return;let e=u(t,"h-poll");if(!e)return;let n=e.trim().split(/\s+/),o=n[0],f=(n[1]||"30s").match(/^(\d+)(ms|s|m)?$/),a=f?f[2]==="ms"?+f[1]:f[2]==="m"?+f[1]*6e4:+f[1]*1e3:3e4,l=u(t,"h-swap","inner"),s=u(t,"h-target"),c=u(t,"h-select"),d=setInterval(async()=>{if(!document.contains(t)){clearInterval(d);return}let m=s?v(s)??t:t;try{let L=await fetch(o,{headers:{"H-Request":"true",...s?{"H-Target":s}:{}}});if(L.ok){let b=await L.text();c&&(b=j(b,c)),b=F(b),A(m,b,l),g(t,"poll",{url:o,html:b})}}catch{}},a);H(t).poll=d,g(t,"poll-start",{url:o,interval:a})},dt=t=>{if(t.tagName!=="A"||!w(t,"h-get")||C(t))return;let e=t.getAttribute("href");if(!e)return;let o=u(t,"h-prefetch","hover").trim().split(/\s+/),r=o[0]||"hover",f=ot(o[1])||3e4,a=()=>{let l=R.get(e);if(l&&l.expires>Date.now())return;let s={"H-Request":"true"},c=u(t,"h-target");c&&(s["H-Target"]=c);let i=u(t,"h-headers");if(i)try{Object.assign(s,JSON.parse(i))}catch{}let d=fetch(e,{headers:s}).then(async m=>({response:m,text:await m.text()}));R.set(e,{promise:d,expires:Date.now()+f})};if(r==="intersect"){let l=new IntersectionObserver(s=>{for(let c of s)c.isIntersecting&&(a(),l.disconnect())});l.observe(t)}else t.addEventListener("mouseenter",a,{once:!0}),t.addEventListener("focus",a,{once:!0})},K=t=>{Y(t)&&ct(t),w(t,"h-sse")&&lt(t),w(t,"h-poll")&&ut(t),w(t,"h-prefetch")&&dt(t)},G=t=>{!(t instanceof Element)||C(t)||(K(t),t.querySelectorAll("a[h-get][href], form[h-get][action], form[h-post][action], form[h-put][action], form[h-patch][action], form[h-delete][action], [h-sse], [h-poll], [h-prefetch]").forEach(K))},ft=new MutationObserver(t=>{for(let e of t)e.addedNodes.forEach(G)}),Q=()=>{ft.observe(document.documentElement,{childList:!0,subtree:!0}),G(document.body)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Q):Q();document.addEventListener("h:process",t=>G(t.target));history.replaceState({h:!0,url:location.href,target:null,swap:"morph",select:null,title:document.title},"");window.addEventListener("popstate",async t=>{let e=t.state;if(!e?.h)return;if(e.title&&(document.title=e.title),!e.target){location.reload();return}let n=v(e.target);if(!n){location.reload();return}try{let o=B(await(await fetch(e.url,{headers:{"H-Request":"true",...e.target?{"H-Target":e.target}:{}}})).text());e.select&&(o=j(o,e.select)),A(n,o,e.swap)}catch{location.reload()}});
